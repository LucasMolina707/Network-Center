<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Título de la Página - Portal Interno</title>

    <meta name="robots" content="noindex, nofollow">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>

    <header class="main-header">
        <div class="container">
            <a href="portal.html" class="logo">
                <svg class="logo-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 115 115" style="enable-background:new 0 0 115 115;" xml:space="preserve">
                    <g><path d="M96.7,33.3c-1.7-1.7-4.4-1.7-6,0L83,41l-2.7-2.7c-3.1-3.1-8.2-3.1-11.3,0L64,43.3l-5.6-5.6c-1.7-1.7-4.4-1.7-6,0L38.2,51.8c-1.7,1.7-1.7,4.4,0,6l7.8,7.8L34.7,76.9c-3.1,3.1-3.1,8.2,0,11.3L40,93.5c1.5,1.5,3.6,2.3,5.7,2.3s4.1-0.8,5.7-2.3l11.3-11.3l11.3,11.3c1.5,1.5,3.6,2.3,5.7,2.3s4.1-0.8,5.7-2.3l5.2-5.2c3.1-3.1,3.1-8.2,0-11.3L85,65.3l7.8-7.8c1.7-1.7,1.7-4.4,0-6L96.7,33.3z M76.3,82.3c-1.5,1.5-3.6,2.3-5.7,2.3s-4.1-0.8-5.7-2.3L53.7,71.1l11.3-11.3l22.6,22.6c-1.6,1.5-3.6,2.3-5.7,2.3s-4.1-0.8-5.7-2.3L65,71l-2.7,2.7c-1.5,1.5-3.6,2.3-5.7,2.3s-4.1-0.8-5.7-2.3L40,62.8L51.3,51.5L64,64.2l5-5l-9.3-9.3l11.3-11.3l10.2,10.2L76.3,82.3z"/><path d="M76.8,16.5c-3.1-3.1-8.2-3.1-11.3,0L54.2,27.8l-2.7-2.7c-3.1-3.1-8.2-3.1-11.3,0L23,42.2c-3.1,3.1-3.1,8.2,0,11.3l5.2,5.2c1.5,1.5,3.6,2.3,5.7,2.3s4.1-0.8,5.7-2.3L50.8,47.5l-2.7-2.7c-1.5-1.5-1.5-4.1,0-5.7l9.3-9.3l-5,5L40,22.2L51.3,11l9.3,9.3c1.5,1.5,4.1,1.5,5.7,0l2.7-2.7l11.2,11.2L75,25.8c-1.5-1.5-2.3-3.6-2.3-5.7s0.8-4.1,2.3-5.7l11.3-11.3c1.5-1.5,3.6-2.3,5.7-2.3s4.1,0.8,5.7,2.3l5.2,5.2c3.1,3.1,3.1,8.2,0,11.3L90,32.7l-7.8,7.8c-1.7,1.7-4.4,1.7-6,0l-3.8-3.8L76.8,16.5z"/></g>
                    <text x="10" y="110" font-family="Arial, sans-serif" font-size="12" fill="#00aaff">NETWORK</text>
                    <text x="10" y="122" font-family="Arial, sans-serif" font-size="12" fill="#00aaff">CENTER S.A.S</text>
                </svg>
                <span>Colaboradores</span>
            </a>
            <nav class="main-nav">
                <ul id="nav-menu-placeholder"></ul>
            </nav>
            <button class="nav-toggle" aria-label="Abrir menú"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <main>
        <div class="page-header">
            <div class="container">
                <h1>Título de la Página</h1>
            </div>
        </div>

        <div class="content-area">
            <div class="container">
                <p>Este es el cuerpo de tu nueva página. Puedes agregar texto, imágenes y usar los componentes definidos en el CSS.</p>
                <div class="grid-container grid-3-cols" style="margin-top: 2rem;">
                    <div class="card"><div class="card-body"><h3>Elemento 1</h3><p>Contenido del primer elemento.</p></div></div>
                    <div class="card"><div class="card-body"><h3>Elemento 2</h3><p>Contenido del segundo elemento.</p></div></div>
                    <div class="card"><div class="card-body"><h3>Elemento 3</h3><p>Contenido del tercer elemento.</p></div></div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2025 Network Center S.A.S. Portal de uso interno.</p>
        </div>
    </footer>

<script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
    <script>
        // --- Configuración de Auth0 ---
        const config = {
            domain: 'dev-e53jc0q5g7pd2ek6.us.auth0.com', 
            clientId: 'urDCH6ExoskeEbYxxZH7iZEPVxi99t8p' 
        };

        let auth0Client = null;

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // --- CORRECCIÓN APLICADA AQUÍ ---
                // Se corrigió "_config" a "...config" para que la configuración se cargue correctamente.
                auth0Client = await auth0.createAuth0Client({
                    ...config,
                    cacheLocation: 'localstorage'
                });
                // --- FIN DE LA CORRECCIÓN ---

                if (window.location.search.includes('code=') && window.location.search.includes('state=')) {
                    await auth0Client.handleRedirectCallback();
                    window.history.replaceState({}, document.title, window.location.pathname);
                }

                const isAuthenticated = await auth0Client.isAuthenticated();

                if (!isAuthenticated) {
                    await auth0Client.loginWithRedirect({
                        authorizationParams: { redirect_uri: window.location.href }
                    });
                } else {
                    // Si el usuario está autenticado, cargamos el menú y cualquier otra función de la página.
                    loadPageFunctions();
                }
            } catch (err) {
                console.error("Error en la autenticación: ", err);
                window.location.href = 'index.html';
            }
        });
        
        // Esta función ahora carga el menú Y activa otras funcionalidades de la página.
        async function loadPageFunctions() {
            // Cargar el menú de navegación
            const navMenuPlaceholder = document.getElementById('nav-menu-placeholder');
            if (navMenuPlaceholder) {
                const response = await fetch('/assets/data/menu-links.json');
                const links = await response.json();

                links.forEach(link => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.textContent = link.texto;
                    a.href = link.url;
                    li.appendChild(a);
                    navMenuPlaceholder.appendChild(li);
                });

                const logoutLi = document.createElement('li');
                const logoutBtn = document.createElement('a');
                logoutBtn.textContent = 'Cerrar Sesión';
                logoutBtn.href = '#';
                logoutBtn.style.fontWeight = 'bold';
                logoutBtn.onclick = () => {
                    auth0Client.logout({
                        logoutParams: { returnTo: 'https://nc.inglucas.com.co/' }
                    });
                };
                logoutLi.appendChild(logoutBtn);
                navMenuPlaceholder.appendChild(logoutLi);
            }

            // Activar lógica del menú móvil
            const navToggle = document.querySelector('.nav-toggle');
            const mainNav = document.querySelector('.main-nav');
            if(navToggle && mainNav) {
                navToggle.addEventListener('click', () => mainNav.classList.toggle('is-visible'));
            }

            // Activar lógica de botones de copiar (si existen en la página)
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const codeBlock = button.previousElementSibling;
                    const code = codeBlock.innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        const originalIcon = button.innerHTML;
                        button.innerHTML = '<i class="fas fa-check"></i> Copiado';
                        setTimeout(() => { button.innerHTML = originalIcon; }, 2000);
                    }).catch(err => { console.error('Error al copiar: ', err); });
                });
            });
        }
    </script>

</body>
</html>